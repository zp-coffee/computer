# 计算机网络体系架构

## 计算机网络概述

### 概述

*   **计算机网络**是一个将**分散的，具有独立功能**的计算机系统，通过**通信设备**与**线路**连接起来，由**功能完善的软件**实现**资源共享**和**信息传递**的系统

*   **客户机**是客户访问网络的出入口
*   **服务器**是提供服务，存储信息的设备
*   **中继器和桥接器**通常是用于局域网的物理层和数据链路层的联网设备
*   目前局域网接入广域网主要是通过**路由器**这种互联设备来实现的

*   ARPAnet是最早的计算机网络，是因特网(Internet)的前身



### 计算机网络的组成

*   **从组成部分上看：**
    *   硬件
        *   主机(端系统)，通信链路(双绞线，光纤)，交换设备(路由器，交换机)，通信处理机(网卡)
    *   软件
        *   各种实现资源共享的软件和方便用户使用的各种工具软件(网络操作系统，邮件收发程序，FTP程序，聊天软件)，软件多属于应用层
    *   协议
        *   计算机网络的核心，协议规定了网络传输数据时所遵循的规范
*   **从工作方式上看：**
    *   边缘部分(计算机实体，身体各部分)
        *   所有连接到因特网上，供用户直接使用的主机组成，用来进行通信和资源共享
    *   核心部分(计算机之间的连接器，大脑)
        *   大量的网络和连接这些网络的路由器组成，为边缘部分提供连通性和交换服务

*   **从逻辑功能组成上看：**
    *   通信子网(传输介质，通信设备，协议)
        *   各种传输介质，通信设备和相应的网络协议，使网络具有数据传输，交换，控制和存储的能力，实现联网计算机之间的数据通信
        *   网桥，交换机，路由器
        *   对应OSI参考模型下三层：物理层，数据链路层，网络层
    *   资源子网(资源共享，软件，设备)
        *   实现资源共享功能的设备及其软件的集合，向网络用户提供共享其他计算机上的硬件资源，软件资源和数据资源的服务
        *   资源子网主要由计算机系统，终端，联网外部设备，各种软件资源和信息资源等组成
        *   计算机软件



### 计算机网络的功能

*   **数据通信**
    *   计算机网络的**最基本，最重要**的功能，用来实现联网计算机之间各种信息的传输，并将分散在不同地理位置的计算机联系起来，进行统一的调配，控制和管理
*   **资源共享**
    *   软件共享，硬件共享，数据共享，使计算机网络中的资源互通有无，分工协作，极大地提高硬件资源，软件资源，数据资源的利用率
*   **分布式处理**
    *   将处理的某个复杂任务分配给网络中的其他计算机系统，从而利用空闲计算机资源来提高整个系统的利用率
*   **提高可靠性**
    *   计算机网络中的各台计算机可以通过网络互为替代机
*   **负载均衡**
    *   将工作任务均衡地分配给计算机网络中的各台计算机



### 计算机网络的分类

*   **按分布范围：**
    *   广域网(WAN)
        *   提供长距离通信，是因特网的核心部分，连接广域网的各结点交换机的链路一般都是高速链路，具有较大的通信容量，采用交换技术
    *   城域网(MAN)
        *   采用以太网技术
    *   局域网(LAN)
        *   使用广播技术，局域网工作在数据链路层
    *   个人区域网(PAN)
        *   指在个人工作的地方将消费电子设备用**无线技术**连接起来的网络，也称无线个人局域网



*   **按传输技术：**
    *   广播式网络
        *   局域网，广域网中的无线，卫星通信网络
    *   点对点网络
    *   是否采用**分组存储转发**和**路由选择机制**是点对点式网络与广播式网络的重要区别，广域网基本都属于点对点网络



*   **按拓扑结构：**

    *   网络拓扑结构是指网中结点(主机，路由器)与通信线路(网线)之间的几何关系表示的网络结构，主要指**通信子网**的拓扑结构

    

    *   总线形网络(多用于局域网)

        *   优点：建网容易，增/减结点方便，节省线路

        *   缺点：重负载时通信效率不高，总线任意一处对故障敏感

            ![img](/Users/coffeeboy/Desktop/考研/assets/70.gif)

    *   星形网络(多用于局域网)

        *   优点：便于集中控制和管理

        *   缺点：成本高，中央设备对故障敏感

            ![img](/Users/coffeeboy/Desktop/考研/assets/70-20231011165038047.gif)

    *   环形网络(多用于局域网)

        *   令牌环局域网，环中信号是单向传输的，多用于局域网

            ![img](/Users/coffeeboy/Desktop/考研/assets/70-20231011165200205.gif)

    *   网状网络(多用于广域网)

        *   有规则型和非规则型

        *   优点：可靠性高

        *   缺点：控制复杂，线路成本高

            ![img](/Users/coffeeboy/Desktop/考研/assets/70-20231011165324810.gif)



*   **按使用者分类：**
    *   公用网
        *   电信公司出资建造的大型网络
    *   专用网
        *   某个部门为了满足本单位特殊业务建造的网络，比如铁路，电力，军队等部门的专用网



*   **按交换技术分类：**
    *   交换技术是指**各台主机之间，各通信设备之间或主机与通信设备之间**为**交换信息所采用的数据格式和交换装置**的方式
    *   电路交换网络
        *   在源结点和目的结点之间建立一条专用的线路，会独占资源，比如电话通信
        *   优点：数据直接传送，时延小
        *   缺点：线路利用率低，不能充分利用线路容量，不便于进行差错控制
    *   报文交换网络
        *   将用户数据封装成报文，可以单独选择到达目的结点的路径，采用存储，转发机制，不独占资源
        *   优点：
            *   充分地利用线路容量
            *   实现不同链路之间不同数据传输速率的转换
            *   实现格式转换
            *   实现一对多，多对一的访问
            *   实现差错控制
        *   缺点：
            *   增大了资源开销
            *   增加了缓冲时延
            *   需要额外的控制机制来保证多个报文的顺序不乱序
            *   缓冲区难以管理
    *   分组交换网络
        *   将数据分成固定长度的数据块，采用报文交换网络的传输方式进行传输
        *   优点：
            *   报文网络的优点
            *   缓冲易于管理
            *   包的平均时延更小
            *   网络占用的平均缓冲区更少
            *   更易于标准化
            *   更适合应用



*   **按传输介质分类：**
    *   无线网络
        *   蓝牙，微波，无线电
    *   有线网络
        *   双绞线网络
        *   同轴电缆网络



### 计算机网络的性能指标

*   **带宽：**网络的通信线路所能传送数据的能力，单位比特/秒 (b/s)
*   **时延：**数据从网络的一端传送到另一端所需的总时间
    *   发送时延
        *   数据从发送端到线路上的时间：发送时延=分组长度/信道宽度
    *   传播时延
        *   数据在线路上传输的时间：传播时延=信道长度/电磁波在信道上的传播速率，传播时延取决于传播介质以及收发双方的距离
    *   处理时延
        *   数据到达结点进行处理的时间
    *   排队时延
        *   数据进入路由器后在输入队列排队等待处理的时间
*   **时延带宽积：**发送端发送的第一个比特即将到达终点时，发送端已经发出了多少个比特
    *   时延带宽积=传播时延*信道带宽
*   **往返时延：**从发送端发出一个短分组，到发送端接收到接受端到确认的总时间
*   **吞吐量：**单位时间内通过某个网络的数据量
*   **速率：**连接到计算机网络上的主机在**数字信道**上传送数据的速率，也称**数据传输速率，数据率，比特率**，通常把最高数据传输速率称为带宽
*   **信道利用率：**某一信道有百分之多少时间是有数据通过的，信道利用率=有数据通过时间/总时间



*   总时延=发送时延+传播时延+处理时延+排队时延
*   对于高速链路，提高的仅是数据发送速率而非比特在链路上的传输速率，提高数据的发送速率只是为了减少数据的发送时延

![assets-20231011193027388](/Users/coffeeboy/Desktop/考研/assets/image-20231011193027388.png)



## 计算机网络体系结构与参考模型

### 计算机网络分层结构

*   **目的：**为了降低协议设计和调试过程的复杂性，为了便于对网络进行研究，实现和维护，促进标准化工作，所以对计算机网络的体系结构进行分层建模
*   **体系结构：**计算机网络的各层及其协议的集合
*   **分层的基本原则：**
    *   每层都实现一种相对独立的功能，降低大系统的复杂度——**(独立的功能)**
    *   各层之间界面自然清晰，易于理解，相互交流尽可能少——**(界面清晰)**
    *   各层功能的精确定义独立于具体的实现方法，可以采用最合适的技术来实现——**(实现方法独立)**
    *   保持下层对上层的独立性，上层单向使用下层提供的服务——**(上下层独立)**
    *   整个分层结构应能促进标准化工作——**(每层都促进标准化工作)**
*   第n层中的活动元素通常称为第n层实体，**实体：**任何可发送或接收信息的硬件或软件进程，通常是一个特定的软件模块
*   不同机器上的同一层称为**对等层**，同一层的实体称为**对等实体**
*   每层的报文分为2个部分：服务数据单元SDU，协议控制信息PCI，SDU+PCI=PDU(协议数据单元)
*   每一层传送的数据单元的名称，大小，含义都不同：
    *   物理层的PDU称为**比特**
    *   数据链路层的PDU称为**帧**
    *   网络层的PDU称为**分组**
    *   传输层的PDU称为**报文段**
*   **层次结构的含义：**
    *   上层要使用下层的服务来完成本层的功能，再向更上层提供服务
    *   最底层只提供服务，是整个层次结构的基础，最高层向用户提供服务
    *   上层只能通过相邻层之间的接口来使用下层的服务，下层提供的服务的实现细节对上层透明
    *   两台主机通信时，对等层在逻辑上有一条直接信道，能不经过下层直接将信息发送到对方



### 协议，接口，服务

*   **协议：**
    *   **协议：**规则的集合
    *   **网络协议：**为进行网络中的数据交换而建立的规则，标准或约定，控制**对等实体**进行通信的规则的集合，简称协议
    *   协议由**语法，语义，同步**三部分组成：
        *   **语法：**规定了传输数据的格式（格式）
        *   **语义：**规定了所要完成的功能，即需要发出何种控制信息，完成何种动作及做出何种应答（数据）
        *   **同步：**规定了执行各种操作的条件，时序关系，即事件实现顺序的详细说明（顺序）
    *   一个完整的协议应具有**线路管理，差错控制，数据转换**的功能
*   **接口：**
    *   **接口：**是同一结点内**相邻两层间**的交换信息的连接点，是一个系统内部的规定
    *   同一结点相邻两层的实体通过**服务访问点SAP**进行交互
*   **服务：**
    *   **服务：**下层为紧邻的上层提供的功能调用
    *   上层使用下层所提供的服务时必须与下层交换一些命令，这些命令在OSI模型中称为**服务原语**
    *   OSI参考模型将原语分为四类：
        *   请求（requset）：由上层发往下层，请求完成某项工作
        *   响应（response）：由上层发往下层，作为对指示的响应
        *   指示（indication）：由下层发往上层，指示上层做某件事情
        *   证实（confirmation）：由下层发往上层，作为对请求的证实
    *   有应答服务包括全部4类原语，无应答服务只包含请求和指示
    *   只有本层协议的实现才能保证向上一层提供服务
    *   并非在一层内完成的所有功能都叫做服务，只有能够被上一层实体看得见的才称为服务
    *   计算机网络提供的服务按以下三种方式分类：
        *   **面向连接服务和无连接服务**
            *   面向连接服务：通信前双方必须建立连接，分配相应的资源(如缓冲区)，传输结束后释放连接和所占用的资源，可以分为连接建立，数据传输，连接释放三个阶段，比如TCP
            *   无连接服务：通信前双方不需要建立连接，发送数据时直接发送，把每个带有目的地址的包传送线路上，这是一种不可靠的服务，比如IP，UDP
        *   **可靠服务和不可靠服务**
            *   可靠服务：指网络具有纠错，检错，应答机制，能保证数据正确，可靠地传送到目的地
            *   不可靠服务：指网络只是尽量正确，可靠地传送，而不能保证数据正确，可靠地传送到目的地，是一种尽力而为的服务
        *   **有应答服务和无应答服务**
            *   有应答服务：指接收方在收到数据后向发送方给出相应的回答，比如文件传输服务
            *   无应答服务：指接收方收到数据后不自动给出应答，若需要应答由高层实现，比如WWW服务



### ISO/OSI参考模型和TCP/IP模型

#### OSI参考模型

*   **OSI参考模型：**ISO提出的网络体系结构模型，称为**开放系统互连参考模型(OSI/RM)**
*   OSI一共有7层：物理层，数据链路层，网络层，传输层，会话层，表示层，应用层
*   低三层：物理层，数据链路层，网络层统称为**通信子网**，为了联网而附加的通信设备，完成数据的传输功能
*   高三层：会话层，表示层，应用层统称为**资源子网**，相当于计算机系统，完成数据的处理
*   传输层承上启下
*   **分别说明各层的功能：**
    *   **物理层：**（底层设备）
        *   传输单位：比特
        *   功能：在物理媒体上为数据端设备透明地传输原始比特流
        *   物理层主要定义**数据终端设备(DTE)**和**数据通信设备(DCE)**的物理与逻辑连接方法
        *   物理层的接口标准很多，比如：EIA-232C，EIA/TIA RS-449，CCITT的X.21
        *   物理层的主要研究内容：
            *   通信链路与通信结点的连接需要一些电路接口，物理层规定了这些接口的一些参数，如：机械形状，尺寸，交换电路的数量和排列
            *   物理层也规定了通信链路上传输的信号的意义和电气特征
        *   传输信号所利用的物理媒体，如双绞线，光缆，无线信道并不在物理层协议之内
    *   **数据链路层：**（点到点的线路）
        *   传输单位：帧
        *   功能：将网络层传来的IP数据报组装**成帧（成帧），差错控制，流量控制，传输管理**
            *   差错控制：检测数据传输中的错误，将错误信息丢弃
            *   流量控制：协调两个结点之间的速率
        *   广播式网络在数据链路层还需要处理**如何控制对共享信道的访问**，数据链路层中的子层：介质访问子层就是来处理这个问题
        *   典型的数据链路层协议：SDLC，HDLC，PPP，STP和帧中断
    *   **网络层：**（主机到主机）
        *   传输单位：数据报
        *   功能：通信子网的运行控制，把网络层的协议数据单元(分组)从源端传到目的端，为分组交换网上的不同主机提供通信服务，主要问题是对分组进行**路由选择，实现差错控制，流量控制，拥塞控制，网际互联**
        *   拥塞控制：缓解一个结点来不及接收分组而要丢弃大量分组使网络处于拥塞的情况
        *   因特网由大量异构网络通过路由器相互连接起来，主要网络协议为**无连接的网际协议和许多路由选择协议**，也称网际层或IP层
        *   网络层的协议：IP，IPX，ICMP，IGMP，ARP，RARP，OSPF
    *   **传输层：**（端到端的线路）
        *   传输单位：报文段(TCP)或用户数据报(UDP)
        *   功能：负责**主机中两个进程之间的通信**，为端到端连接提供可靠的传输服务，为端到端连接提供**差错控制，流量控制，应答，分组排序，服务质量，数据传输管理等服务，复用和分用的功能**
        *   复用：指多个应用层进程可同时使用下面传输层的服务
        *   分用：指传输层把收到的信息分别交付给上面应用层中相应的进程
        *   数据链路层提供的是点到点的通信，传输层提供的是端到端的通信
        *   点到点指的是**主机到主机之间的通信**，一个点指一个硬件地址或IP地址，网络中参与通信的主机是通过硬件地址或IP地址标识
        *   端到端指的是运行在**不同主机内的两个进程之间的通信**，一个进程由一个端口来标识
        *   传输层的协议：TCP，UDP
    *   **会话层：**（管理会话，同步）
        *   会话层允许不同主机上的各个进程之间进行会话
        *   会话层利用传输层提供的端到端的服务，向表示层提供他的增值服务，这种服务主要为**表示层实体或用户进程**建立连接并在连接上有序地传输数据，也称**建立同步**（SYN）
        *   会话层负责管理主机间的会话进程，包括建立，管理及终止进程间的会话
        *   会话层可以使用校验点使通信会话在通信失效时从校验点继续恢复通信，实现数据同步
    *   **表示层：**（表示方法转换）
        *   表示层主要处理两个通信系统中交换信息的表示方式
        *   采用抽象的标准方法定义数据结构，标准的编码形式，数据压缩，加密和解密的方式来使不同表示方法的数据和信息之间能够进行交换
    *   **应用层：**（交互界面）
        *   OSI模型的最高层，是用户与网络的界面
        *   应用层为特定类型的网络应用提供访问OSI参考模型环境的手段
        *   应用层的协议：文件传送的FTP，电子邮件的SMTP，万维网的HTTP



#### TCP/IP参考模型

*   ARPA在研究APRAnet时提出了**TCP/IP**模型
*   TCP/IP模型一共有四层：网络接口层，网际层，传输层，应用层
*   **网络接口层：**（与物理网络的接口）
    *   功能类似于OSI的**物理层和数据链路层**
    *   作用：从主机或结点接收IP分组，并将他们发送到指定的物理网络中
*   **网际层：**（主机到主机）
    *   功能类似于OSI的网络层
    *   网际层定义了标准的分组格式和协议，即IP，采用的IP协议是IPv4，下一版是IPv6
*   **传输层：**（应用到应用 或 进程到进程）
    *   功能类似于OSI中的传输层
    *   作用：使得发送端和目的端主机上的对等实体进行会话
    *   传输层主要使用以下两种协议：
        *   传输控制协议（TCP）：面向连接，数据传输的单位是报文段，能够提供可靠的交付
        *   用户数据报协议（UDP）：无连接，数据传输的单位是用户数据报，不能提供可靠的交付
*   **应用层：**（用户到用户）
    *   包含所有的高层协议，比如虚拟终端协议（Telnet），文件传输协议（FTP），域名解析服务（DNS），电子邮件协议（SMTP），超文本传输协议（HTTP）



#### OSI和TCP/IP模型的比较

*   **相似之处：**
    *   都采取分层的体系结构，将庞大且复杂的问题划分为若干较容易处理的，范围较小的问题
    *   都是基于独立的协议栈的概念
    *   都可以解决异构网络的互联，实现世界上不同厂家生产的计算机之间的通信
*   **差别：**
    *   OSI精确地定义了三个主要概念：服务，协议，接口，而TCP/IP在这三个概念上没有明确的区分
    *   OSI通用性良好，TCP/IP不会出现协议不能匹配模型的情况，但该模型不适合于其他任何非TCP/IP的协议栈
    *   对于多种异构网的互联问题，OSI在网络层中划分出一个子层来完成类似于TCP/IP模型中的IP的功能，TCP/IP将网际协议（IP）作为一个单独的重要层次
    *   OSI在**网络层支持无连接和面向连接的通信，但在传输层仅有面向连接的通信**，TCP/IP在**网际层仅有一种无连接的通信模式，但传输层支持无连接和面向连接两种模式**



### 习题

*   对网络模型进行分层的目标：
    *   提供标准语言
    *   定义标准界面
    *   增加功能之间的独立性
*   将用户数据分成一个个数据块传输的优点：
    *   减少延迟时间
    *   提供错误控制效率
    *   使多个应用更公平地使用共享通信介质
*   ISO设计出了OSI/RM参考模型，但是实际使用的是TCP/IP
*   **数据链路层**在不可靠的物理介质上提供可靠的传输
    *   作用有：物理寻址，成帧，流量控制，差错校验，数据重发
    *   功能有：链路连接的建立，拆除，分离，帧界定，帧同步，差错检测
*   **网络层**实现路由选择，流量控制，拥塞控制，差错控制，网际互联
*   **传输层**实现应答，分组排序，流量控制
*   **会话层**实现会话管理，同步，恢复通信
*   **表示层**实现数据解密和加密，压缩，格式转换

*   **网络层和表示层**为上层提交的数据加上首部，**数据链路层**为上层提交的数据加上首部和尾部
*   **数据链路层**在分组上增加源和目的物理地址，还有控制信息
*   **传输层**负责增加相应源和目的端口信息
*   **网络层**只增加PCI
*   **OSI**在网络层支持无连接和面向连接的通信，在传输层仅支持面向连接的通信
*   **TCP/IP**在网际层仅支持无连接的通信，在传输层支持无连接和面向连接的通信
*   只有**传输层及其以上各层**的通信才能称为**端到端**，**数据链路层及其以上各层**都有流量控制功能
*   因特网应用到网络协议为采用分组交换技术的TCP/IP协议
*   服务访问点（SAP）是一个层次系统的上下层之间进行通信的接口
    *   物理层的SAP为**网卡接口**
    *   数据链路层的SAP为**MAC地址（网卡地址）**
    *   网络层的SAP为**IP地址（网络地址）**
    *   传输层的SAP为**端口号**
    *   应用层的SAP为**用户界面**
*   集线器是一个多端口的中继器，工作在物理层
*   以太网交换机是一个多端口的网桥，工作在数据链路层
*   路由器是网络层设备
*   数据链路层，网络层，传输层都具有流量控制功能
    *   数据链路层是相邻结点之间的流量控制，网络层是整个网络中的流量控制，传输层是端到端的流量控制
*   **传输速率**是指主机在数字信道上发送数据的速率
*   **带宽**是指在计算机网络中数字信道所能传送的“最高数据传输速率”，常用来表示网络的通信线路传送数据的能力
*   **传播速率**时是指电磁波在信道中传播的速率